\include{settings}

\begin{document}

\include{titlepage}

\tableofcontents
\newpage

\section{Цели работы}

\begin{itemize}
	\item Изучить принципы организации файловой системы ОС UNIX на примере Linux.
	\item Познакомиться с типами файлов исследуемой ФС.
	\item Проанализировать способы формирования жестких и символьных ссылок.
	\item Исследовать права владения и доступа, а также их сочетаемость.
\end{itemize}

\section{Используемая операционная система}

\begin{itemize}
	\item Дистрибутив: Ubuntu 18.04.1 LTS
	\item Процессоры: Intel® Core™ i7-4800MQ CPU @ 2.70GHz × 8
	\item Версия ядра: 4.15.0-34-generic
\end{itemize}

\section{Иерархия файловой системы}

\subsection{Стандарт иерархии файловой системы}

% Wiki, Word, http://linux.yaroslavl.ru/docs/conf/fs/fhs-full.html
Стандарт иерархии файловой системы (Filesystem Hierarchy Standard, FHS) унифицирует местонахождение файлов и каталогов с общим назначением в файловой системе UNIX. Для получения справки об используемой в ОС системе каталогов можно использовать man-страницу \code{hier(7)}.

На рисунке \ref{fig:fhs} изображен упрощенный вариант иерархии каталогов Linux. В FHS все файлы и каталоги находятся внутри корневого каталога (\code{/}), даже если они расположены на различных физических носителях. 
\begin{figure}[H]
	\centering
	\includegraphics[width=0.85\textwidth]{fhs}
	\caption{Иерархия каталогов Linux}
	\label{fig:fhs}
\end{figure}

\subsection{Описание иерархии каталогов}

К основным каталогам FHS относятся:
\begin{itemize}
	\item \code{/bin/} -- содержит исполняемые файлы, включая большинство основных команд системы UNIX, таких как \code{ls} и \code{cp}.
	\item \code{/boot/} -- содержит файлы загрузчика ядра (данные, которые используются до того, как ядро начинает исполнять программы пользователя).
	\item \code{/dev/} -- содержит файлы устройств.
	\item \code{/etc/} -- содержит конфигурационные файлы и каталоги, специфичные для данной конкретной системы (пароль
	пользователя, файлы загрузки, файлы устройств, сетевые настройки и др.).
	\item \code{/home/} -- содержит личные каталоги обычных пользователей.
	\item \code{/lib/} -- содержит динамические библиотеки, необходимые для работы программ из \code{/bin/}.
	\item \code{/media/} -- является точкой подключения съемных устройств (CD-ROM, флеш-накопители и др.).
	\item \code{/mnt/} -- содержит временно монтируемые файловые системы.
	\item \code{/root/} -- домашний каталог суперпользователя.
	\item \code{/opt/} -- может содержать ПО сторонних разработчиков.
	\item \code{/sbin/} -- содержит основные системные программы для администрирования и настройки системы 
	\item \code{/tmp/} -- предназначен для хранения временных файлов, создаваемых в процессе работы различных программ.(\code{init}, \code{iptables}, \code{ifconfig} и др.).
	\item \code{/usr/} -- вторичная иерархия для данных пользователя,  содержащая разделяемые данные, предназначенные только для чтения:
	\begin{itemize}[topsep=0em]
		\item \code{bin/} -- исполняемые файлы;
		\item \code{include/} -- стандартные заголовочные файлы;
		\item \code{lib/} -- объектные файлы и библиотеки;
		\item \code{local/} -- третичная иерархия для данных, специфичных для данного хоста;
		\item \code{sbin/} -- дополнительные системные программы (демоны различных сетевых сервисов);
		\item \code{share/} -- архитектурно-независимые данные.
	\end{itemize}
	\item \code{/var/} -- содержит файлы с изменяющимися данными: каталоги и файлы логирования (\code{log/}), временные файлы, сохраняемые между перезапусками системы (\code{tmp/}), данные кэшей приложений (\code{cache/}) и др. 
\end{itemize}

\newpage

\section{Типы файлов}

\subsection{Обычные файлы}

К обычным файлам относятся текстовые файлы, изображения, архивы и другие. В утилите \code{ls} обозначается <<\code{-}>>:
\lstinputlisting{1_file_types/file}

\subsection{Каталоги}

Каталоги -- это файлы, в качестве данных которых выступают списки других файлов и каталогов. В утилите \code{ls} обозначается <<\code{d}>>:
\lstinputlisting[deletekeywords={test}]{1_file_types/directory}

\subsection{Символьные ссылки}

Символьная ссылка — это файл в данных которого, содержится указание на адрес другого файла по его имени (но не индексному дескриптору). В утилите \code{ls} обозначается <<\code{l}>>:
\lstinputlisting{1_file_types/symbolic}

\subsection{Файлы устройств}

Файлы устройств -- это файлы, предназначенные для обращения к аппаратному обеспечению компьютера (дискам, принтерам, терминалам и др.). К символьным устройствам обращение происходит последовательно (терминал).
Считывание и запись информации на блочные устройства происходит блоками определенного размера в произвольном порядке (жесткий диск). В утилите \code{ls} обозначаются как <<\code{c}>> и <<\code{d}>> соответственно:
\lstinputlisting[lastline=15]{1_file_types/character}
\lstinputlisting{1_file_types/block}

\subsection{Именованные каналы}

Именованные каналы -- это файлы, позволяющие настроить связь между двумя процессами перенаправив вывод одного процесса на вход другого. Именованный канал позволяет различным процессам обмениваться данными, даже если программы, выполняющиеся в этих процессах, изначально не были написаны для взаимодействия с другими программами. В утилите \code{ls} обозначается <<\code{p}>>:
\lstinputlisting{1_file_types/pipe}

\subsection{Сокеты}

Файлы сокетов -- это файлы, обеспечивающие прямую связь между двумя процессами. Помимо обмена данными, сокеты позволяют обмениваться файловыми дескрипторами. В утилите \code{ls} обозначается <<\code{s}>>:
\lstinputlisting{1_file_types/socket}

\section{Ссылки}

Файлы и директории располагаются на устройстве хранения в виде набора блоков. Информация о файле (такая, как владелец файла, время последнего обращения к файлу, размер файла, права на чтение или запись, является ли элемент файлом или директорией) хранится в индексном дескрипторе \code{inode}. Номер \code{inode}, известный также как порядковый номер файла, является уникальным в пределах отдельной файловой системы. Запись каталога содержит имя файла (или директории), а также указатель на дескриптор inode, в котором хранится информация об этом файле (или директории).

Ссылки -- это просто дополнительные записи каталога, позволяющие обращаться к файлам или директориям по нескольким именам. В Linux существует два типа ссылок на файлы -- \textbf{жесткие} и \textbf{символьные} ссылки. 

\subsection{Жесткие ссылки}

Жесткие ссылки реализованы на более низком уровне файловой системы, чем символьные. Файл размещен только в определенном месте жесткого диска, но на это место могут ссылаться несколько ссылок из файловой системы. Каждая из ссылок -- это отдельный файл, но ведут они к одному участку жесткого диска. Ключевые особенности:
\begin{itemize}
	\item Работают только в пределах одной файловой системы;
	\item Нельзя ссылаться на каталоги;
	\item Имеют ту же информацию \code{inode} и набор разрешений что и у исходного файла;
	\item Разрешения на ссылку изменяться при изменении разрешений файла;
	\item Можно перемещать, переименовывать и удалять файл без вреда ссылке.
\end{itemize}

Создание жестких ссылок и поиск файлов с одинаковым \code{inode}:
\lstinputlisting{2_hardlinks/create}

\subsection{Символические ссылки}

Символические ссылки более всего похожи на обычные ярлыки. Они содержат адрес нужного файла в вашей файловой системе. Когда вы пытаетесь открыть такую ссылку, то открывается целевой файл или папка. Главное ее отличие от жестких ссылок в том, что при удалении целевого файла ссылка останется, но она будет указывать в никуда, поскольку файла на самом деле больше нет. Ключевые особенности:
\begin{itemize}
	\item Могут ссылаться на файлы и каталоги;
	\item Можно ссылаться на другие разделы диска;
	\item Права доступа и номер \code{inode} отличаются от исходного файла;
	\item После удаления, перемещения или переименования файла становятся недействительными;
	\item При изменении прав доступа для исходного файла, права на ссылку останутся неизменными.
\end{itemize}

Создание символьных ссылок:
\lstinputlisting{3_symbolic_links/create}

Рекурсивный поиск всех символьных ссылок на заданный файл в текущей директории:
\lstinputlisting{4_symbolic_links_search/search}

\section{Выводы}

В процессе выполнения данной работы:
\begin{itemize}
	\item Вывод
	\item Вывод
\end{itemize}

\end{document}
